{% extends 'base.html' %}
{% load product_tags %}
{% load static %}
{% load embed_video_tags %}
{% load i18n %}

{% block css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
{% endblock %}

{% block title %}
{{ title }}
{% endblock title %}

{% block content %}
  <main class="main">
    <div class="up-main-section">
      <div class="breadcrumbs" id="breadcrumbs-main">
        <ul>
          <li>
            <a href="{% url 'main:index' %}">{% translate 'Головна сторінка' %}</a>
          </li>
          <li>
            <a href="{% url 'product:product' %}">{% translate 'Продукція' %}</a>
          </li>
          <li>{{ product.category.name|truncatechars:10 }}</li>
        </ul>
      </div>
    </div>
    <div class="product-info-card">
      <div class="product-header">
        <h2>{{ product.category.name }}</h2>
        <div class="form-buttons">
          <a href="{% url 'catalog:catalog' %}?{{ product.category.slug }}">{% translate 'До каталогу' %}</a>
          <a class="catalog-message">
            <?xml version="1.0" encoding="UTF-8"?><svg id="_Слой_2" data-name="Слой 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42.15 30.95">
              <g id="_Слой_1-2" data-name="Слой 1">
                <path d="M42.15,4.36V26.59c-.02,.05-.05,.1-.06,.15-.59,2.73-2.42,4.21-5.21,4.21-10.59,0-21.18,0-31.77,0C2.15,30.95,0,28.81,0,25.87,0,18.94,0,12.01,0,5.08c0-.41,.03-.83,.12-1.22C.67,1.52,2.63,0,5.1,0,15.66,0,26.23,0,36.79,0c.19,0,.38,0,.58,0,1.56,.08,2.81,.73,3.78,1.96,.56,.71,.82,1.54,1,2.4ZM3.29,5.95c0,.17,0,.23,0,.3,0,6.54,0,13.09,0,19.63,0,1.09,.68,1.77,1.78,1.77,10.66,0,21.32,0,31.98,0,1.12,0,1.8-.67,1.8-1.79,0-6.52,0-13.03,0-19.55,0-.1-.02-.2-.04-.33-.2,.15-.35,.26-.51,.37-5.61,4.17-11.22,8.35-16.83,12.53-.3,.22-.48,.25-.8,.01C15.07,14.7,9.44,10.52,3.82,6.34c-.15-.11-.3-.22-.53-.39ZM36.88,3.31H5.27c5.32,3.95,10.55,7.85,15.81,11.76,5.25-3.91,10.49-7.8,15.81-11.76Z" />
              </g>
            </svg>
          </a>
        </div>
      </div>
      <div class="single-card-product">
        <div class="single-card-left">
          <div class="slider">
            <div class="slider-deco">
              <div class="image-slider swiper-container">
                <div class="image-slider__wrapper swiper-wrapper">
                  <div class="image-slider__slide swiper-slide">
                    <div class="image-slider__image">
                      <img src="{{ product.paragraph_image.url }}" alt="{{ product.category.name }}" />
                    </div>
                  </div>
                  {% for photo in product_photos %}
                    <div class="image-slider__slide swiper-slide">
                      <div class="image-slider__image">
                        <img src="{{ photo.image.url }}" alt="{{ photo.category.category.name }}" />
                      </div>
                    </div>
                  {% endfor %}
                  {% for video in product_videos %}
                    {% video video.video as vid %}
                    <div class="image-slider__slide swiper-slide">
                      <div class="image-slider__image">
                        <iframe id="video-slide" src="{{ vid.url }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                      </div>
                    </div>
                    {% endvideo %}
                  {% endfor %}
                </div>
                <div class="button-next">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.85 9.25">
                    <g>
                      <path d="M15.79,.93c-.13-.41-.44-.73-.83-.86h0c-.52-.16-1.01-.03-1.42,.38l-1.91,1.91c-1.23,1.23-2.46,2.46-3.69,3.69L2.37,.49c-.07-.07-.14-.13-.23-.21-.47-.38-1.15-.38-1.63,0C.19,.53,.07,.87,0,1.11v.03s0,.38,0,.38c.09,.42,.34,.7,.58,.94l2.04,2.04c1.43,1.43,2.85,2.85,4.28,4.28,.1,.1,.21,.21,.35,.28,.21,.13,.44,.19,.67,.19,.35,0,.71-.15,1-.45L15.41,2.32c.06-.07,.12-.13,.18-.2,.25-.33,.33-.77,.2-1.18Z" />
                    </g>
                  </svg>
                </div>
                <div class="button-prev">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.85 9.25">
                    <g>
                      <path d="M15.79,.93c-.13-.41-.44-.73-.83-.86h0c-.52-.16-1.01-.03-1.42,.38l-1.91,1.91c-1.23,1.23-2.46,2.46-3.69,3.69L2.37,.49c-.07-.07-.14-.13-.23-.21-.47-.38-1.15-.38-1.63,0C.19,.53,.07,.87,0,1.11v.03s0,.38,0,.38c.09,.42,.34,.7,.58,.94l2.04,2.04c1.43,1.43,2.85,2.85,4.28,4.28,.1,.1,.21,.21,.35,.28,.21,.13,.44,.19,.67,.19,.35,0,.71-.15,1-.45L15.41,2.32c.06-.07,.12-.13,.18-.2,.25-.33,.33-.77,.2-1.18Z" />
                    </g>
                  </svg>
                </div>
              </div>
            </div>
            <div class="slider-deco">
              <div class="image-mini-slider swiper-container">
                <div class="image-mini-slider__wrapper swiper-wrapper">
                  <div class="image-mini-slider__slide swiper-slide">
                    <div class="image-mini-slider__image">
                      <img src="{{ product.paragraph_image.url }}" />
                    </div>
                  </div>
                  {% for photo in product_photos %}
                    <div class="image-mini-slider__slide swiper-slide">
                      <div class="image-mini-slider__image">
                        <img src="{{ photo.image.url }}" />
                      </div>
                    </div>
                  {% endfor %}
                  {% for video in product_videos %}
                    <div class="image-mini-slider__slide swiper-slide">
                      <div class="image-mini-slider__image">
                        <img src="{% static 'hanbild/icons/play.svg' %}" />
                      </div>
                    </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
          <div class="close-btn">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 348.333 348.334" style="enable-background:new 0 0 512 512" xml:space="preserve" class="">
              <g>
                <path d="M336.559 68.611 231.016 174.165l105.543 105.549c15.699 15.705 15.699 41.145 0 56.85-7.844 7.844-18.128 11.769-28.407 11.769-10.296 0-20.581-3.919-28.419-11.769L174.167 231.003 68.609 336.563c-7.843 7.844-18.128 11.769-28.416 11.769-10.285 0-20.563-3.919-28.413-11.769-15.699-15.698-15.699-41.139 0-56.85l105.54-105.549L11.774 68.611c-15.699-15.699-15.699-41.145 0-56.844 15.696-15.687 41.127-15.687 56.829 0l105.563 105.554L279.721 11.767c15.705-15.687 41.139-15.687 56.832 0 15.705 15.699 15.705 41.145.006 56.844z" fill="#ffffff" opacity="1" data-original="#000000" class=""></path>
              </g>
            </svg>
          </div>
        </div>

        <div class="single-card-right">
          <h3>{% translate 'Опис' %}</h3>
          {{ product.paragraph|linebreaks }}
          {% if product.addition_paragraph %}
            {{ product.addition_paragraph|linebreaks }}
          {% endif %}
        </div>
      </div>
      <div class="single-card-right">
        <h3>{% translate 'Характеристики' %}</h3>
        <table class="s-p-t four-columns">
          <tbody>
            <tr>
              <td>
                <b>{% translate 'Категорія' %}</b>
              </td>
              <td>{{ product.category.name }}</td>
              <td>
                <b>{% translate 'Виготовлення під замовлення' %}</b>
              </td>
              <td>
                {% translate 'Так' %}
              </td>
            </tr>
            {% if product_characteristics %}
              {% for characteristic in product_characteristics %}
                {% get_item product_characteristics forloop.counter0 as ch_1 %}
                {% get_item product_characteristics forloop.counter as ch_2 %}
                {% if forloop.counter0|divisibleby:'2' %}
                  <tr>
                    <td>
                      <b>{{ ch_1.name }}</b>
                    </td>
                    <td>{{ ch_1.description }}</td>
                    <td>
                      <b>{{ ch_2.name }}</b>
                    </td>
                    <td>{{ ch_2.description }}</td>
                  </tr>
                {% endif %}
              {% endfor %}
            {% endif %}
          </tbody>
        </table>

        <table class="s-p-t-g s-p-t two-columns">
          <tbody>
            <tr>
              <td>
                <b>{% translate 'Категорія' %}</b>
              </td>
              <td>{{ product.category.name }}</td>
            </tr>
            <tr>
              <td>
                <b>{% translate 'Виготовлення під замовлення' %}</b>
              </td>
              <td>
                {% translate 'Так' %}
              </td>
            </tr>
            {% if product_characteristics %}
              {% for characteristic in product_characteristics %}
                <tr>
                  <td>
                    <b>{{ characteristic.name }}</b>
                  </td>
                  <td>{{ characteristic.description }}</td>
                </tr>
              {% endfor %}
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  </main>
{% endblock %}

{% block js %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="{% static 'hanbild/js/swiper.js' %}"></script>
{% endblock %}
